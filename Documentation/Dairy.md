# 学习日志

## 10.11 Java 进阶训练营第 0 期开营第一课

1. Redis 用来**读**，MQ用来**写**。
2. ![image-20201011205715012](..\pics\image-20201011205715012.png)
3. 手撕微服务框架。

## 10.15 Week_01 JVM核心技术

### 学习目标

昨天晚上1-2点跟不少同学私下沟通了一下，看到不少同学搞清楚了字节码大概的原理和流程，了解了Classloader的用法和jvm的内存结构，挺好的，这就够了，达到目标了。

1. 第一节课不讲字节码的所有内容，因为没必要，200个操作码，每一个讲一下，找个例子，一整天啥也不干就讲不完。就像是本新华字典，没人会真的把几万个汉字都学一遍。怎么怎么回事儿，用的时候能去查，就够了。字节码的原理搞明白了，才知道为什么jvm叫java虚拟机。线程堆栈操作搞明白大概什么回事儿了，后面的内存和多线程操作，是怎么回事儿，都是铺垫的基础。字节码面试一般被问的不算多，工作中应用的偏底层框架和中间件。对个人来讲，理解java代码写法不同，特别是语法糖的部分，非常有帮助，比如for i++和for each到底是不是一样的，看字节码就成了。同样功能的代码，哪个效率更高，看看字节码复杂程度就有个简单判断。等等。
2. ==classloader模块是个重点==，有很多用处，比如跑程序的时候，发现一个类找不到/或者类找到了方法参数类型不匹配，怎么办，可以用课上那个打印各个类加载器加载的jar，看看是不是少加载了，或者加载错了版本。
3. ==内存模型==，这一块是后面gc的基础，也是重点。先不用考虑gc的细节，明天晚上讲，了解了内存里有哪些组成部分，都是做什么的，就可以了。工作中用处也很多，典型的就是xmx要理解透，线上不能瞎配置，系统会崩的。gc作为jvm的重点，就是个内存管理器，这一块实际面试会问的比较多。并发相关问题，第三个模块讲。
4. jvm参数，后面两课还会详细讲，特别是第二次的工具使用操作和gc，常用的参数都能带着大家练手，不用在本节课搞太多细节，知道有哪几类就可以了。

明天讲：

1. 各种命令行工具和图形工具的使用，怎么来查看jvm的运行状态，具体分析主要放到第三次课讲。
2. 常用的gc算法大概怎么回事儿，有什么特点，什么情况下应该使用什么gc这些问题。

### 字节码技术

- ![image-20201015203959226](..\pics\image-20201015203959226.png)

  事先已经知道栈的深度、局部变量区大小（右图）

- 字节码中 byte boleaon都用int表示

- 32位机器处理long（64位）会分两次操作，当前一次操作出错后，后面会中断，因此不是原子操作。而64位就是一次操作为原子操作。
- 类型转换在编译时候执行：i2l
- 虚方法 实方法 子类覆盖父类 使用虚方法

### 类加载器

- 启动类：util 扩展类：其他类 应用类：自己加载的
- 双亲委派：避免重复加载 负责依赖 缓存加载：只加载一次